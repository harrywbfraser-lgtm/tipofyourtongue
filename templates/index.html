<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tip of Your Tongue â€“ Find the Word You Can't Remember</title>
  <meta name="description" content="Can't remember a word? Describe it and our AI will suggest the perfect word that's on the tip of your tongue, with definitions and alternatives." />
  <meta name="keywords" content="find word by description, can't remember a word, tip of your tongue, word finder, lethologica, AI word finder, vocabulary helper" />
  <link rel="canonical" href="https://tipofyourtongue.co.uk/" />
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
  <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon" />
</head>

<body>
  <div class="container">
    <div class="mode-toggle">
      <button id="modeBtn">ğŸŒ™ Dark Mode</button>
    </div>

    <h1>ğŸ§  Tip of Your Tongue</h1>
    <p class="subtitle">When you just cannot for the life of you remember a word... <strong>lethologica</strong>.</p>

    <div class="card">
      <input type="text" id="clue" placeholder="Describe the word... e.g. 'fear of confined spaces'">
      <button id="findBtn">Find My Word</button>
    </div>

    <section class="seo-text">
      <button id="toggleAbout" class="toggle-about">About Tip of Your Tongue â–¾</button>
      <div id="aboutContent" class="about-content closed">
        <p>
          <strong>Tip of Your Tongue</strong> is a free AI-powered word finder that helps when a word is just out of reach.
          Describe what you mean â€” for example, â€œa word for fear of spidersâ€ â€” and the tool suggests the most likely word,
          plus alternatives and definitions.
        </p>
      </div>
    </section>

    <div id="loading" class="hidden">Thinking ğŸ¤”...</div>

    <div id="resultCard" class="hidden">
      <h2 id="primaryWord"></h2>
      <p id="definition"></p>
      <hr />
      <p id="alternatives"></p>

      <div class="actions">
        <button id="copyBtn">ğŸ“‹ Copy</button>
        <button id="shareBtn">ğŸ”— Share</button>
        <button id="retryBtn">ğŸ” Not That Word</button>
      </div>
    </div>

    <footer><p>Â© 2025 Tip of Your Tongue</p></footer>
  </div>

  <script>
    const button = document.getElementById("findBtn");
    const clueInput = document.getElementById("clue");
    const loading = document.getElementById("loading");
    const resultCard = document.getElementById("resultCard");
    const primaryWord = document.getElementById("primaryWord");
    const definition = document.getElementById("definition");
    const alternatives = document.getElementById("alternatives");
    const copyBtn = document.getElementById("copyBtn");
    const shareBtn = document.getElementById("shareBtn");
    const retryBtn = document.getElementById("retryBtn");
    const modeBtn = document.getElementById("modeBtn");
    const toggleAbout = document.getElementById("toggleAbout");
    const aboutContent = document.getElementById("aboutContent");

    let previousWords = [];

    async function fetchWord(isRetry = false) {
      const clue = clueInput.value.trim();
      if (!clue) {
        alert("Please enter a clue!");
        return;
      }

      loading.classList.remove("hidden");
      resultCard.classList.add("hidden");

      const payload = { clue, previous: previousWords, is_retry: isRetry };

      try {
        const res = await fetch("/find_word", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload),
        });

        const data = await res.json();
        loading.classList.add("hidden");

        if (data.error) {
          primaryWord.textContent = "Error";
          definition.textContent = data.error;
          alternatives.textContent = "";
          resultCard.classList.remove("hidden");
          return;
        }

        const word = data.primary || "No result";
        previousWords.push(word.toLowerCase());

        primaryWord.textContent = word;
        definition.textContent = data.definition || "";
        alternatives.textContent = (data.alternatives && data.alternatives.length)
          ? "Other possible words: " + data.alternatives.join(", ")
          : "No other suggestions.";

        resultCard.classList.remove("hidden");
      } catch (err) {
        loading.classList.add("hidden");
        alert("Something went wrong. Please try again.");
      }
    }

    button.addEventListener("click", () => {
      previousWords = [];
      fetchWord();
    });
    retryBtn.addEventListener("click", () => fetchWord(true));
    clueInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        previousWords = [];
        fetchWord();
      }
    });

    copyBtn.addEventListener("click", () => {
      const text = `${primaryWord.textContent} â€” ${definition.textContent}`;
      navigator.clipboard.writeText(text);
      alert("Copied to clipboard!");
    });

    shareBtn.addEventListener("click", async () => {
      const text = `I found this word on Tip of Your Tongue: ${primaryWord.textContent} â€” ${definition.textContent}`;
      if (navigator.share) {
        await navigator.share({ title: "Tip of Your Tongue", text, url: "https://tipofyourtongue.co.uk/" });
      } else {
        alert("Sharing not supported in this browser.");
      }
    });

    modeBtn.addEventListener("click", () => {
      document.body.classList.toggle("dark");
      modeBtn.textContent = document.body.classList.contains("dark") ? "â˜€ï¸ Light Mode" : "ğŸŒ™ Dark Mode";
    });

    toggleAbout.addEventListener("click", () => {
      const isClosed = aboutContent.classList.contains("closed");
      if (isClosed) {
        aboutContent.classList.remove("closed");
        aboutContent.classList.add("open");
        toggleAbout.textContent = "Hide About Tip of Your Tongue â–´";
      } else {
        aboutContent.classList.remove("open");
        aboutContent.classList.add("closed");
        toggleAbout.textContent = "About Tip of Your Tongue â–¾";
      }
    });
  </script>
</body>
</html>
